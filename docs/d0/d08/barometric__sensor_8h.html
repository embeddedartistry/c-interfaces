<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded Artistry C Interfaces: virtual_devices/barometric_sensor.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Embedded Artistry C Interfaces
   </div>
   <div id="projectbrief">A reference collection of abstract interfaces in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_4c48e607e7c68c02fa43edfc29f787db.html">virtual_devices</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle"><div class="title">barometric_sensor.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Example barometric pressure sensor interfaces that also support altitude calculations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for barometric_sensor.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d4b/barometric__sensor_8h__incl.jpg" border="0" usemap="#avirtual__devices_2barometric__sensor_8h" alt=""/></div>
<map name="avirtual__devices_2barometric__sensor_8h" id="avirtual__devices_2barometric__sensor_8h">
<area shape="rect" title="Example barometric pressure sensor interfaces that also support altitude calculations." alt="" coords="5,5,180,47"/>
<area shape="rect" title=" " alt="" coords="9,95,83,121"/>
<area shape="rect" title=" " alt="" coords="108,95,173,121"/>
</map>
</div>
</div>
<p><a href="../../d0/d08/barometric__sensor_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6b/struct_barometric_sensor.html">BarometricSensor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual Barometric Pressure/Altimeter Sensor Interface.  <a href="../../d9/d6b/struct_barometric_sensor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d26/struct_barometric_sensor__with_cb.html">BarometricSensor_withCb</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual Barometric Pressure/Altimeter Interface (with callback support)  <a href="../../db/d26/struct_barometric_sensor__with_cb.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/de1/struct_barometric_sensor__async_with_cb.html">BarometricSensor_asyncWithCb</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual Barometric Pressure/Altimeter Interface (asynchronous mode)  <a href="../../de/de1/struct_barometric_sensor__async_with_cb.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa55487aacceb8034c0f58ce67a727228"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d08/barometric__sensor_8h.html#aa55487aacceb8034c0f58ce67a727228">NewBarometricSampleCb</a>) (uint32_t pressure, int32_t altitude)</td></tr>
<tr class="memdesc:aa55487aacceb8034c0f58ce67a727228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function prototype for processing new barometric samples.  <a href="../../d0/d08/barometric__sensor_8h.html#aa55487aacceb8034c0f58ce67a727228">More...</a><br /></td></tr>
<tr class="separator:aa55487aacceb8034c0f58ce67a727228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a048ffd57648368fd123cc0674a0db7c5"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d08/barometric__sensor_8h.html#a048ffd57648368fd123cc0674a0db7c5">BarometricErrorCb</a>) (void)</td></tr>
<tr class="memdesc:a048ffd57648368fd123cc0674a0db7c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function prototype for barometric sensor errors.  <a href="../../d0/d08/barometric__sensor_8h.html#a048ffd57648368fd123cc0674a0db7c5">More...</a><br /></td></tr>
<tr class="separator:a048ffd57648368fd123cc0674a0db7c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Example barometric pressure sensor interfaces that also support altitude calculations. </p>
<p >This header defines three variations of a barometric sensor:</p><ul>
<li>A simple interface, which only provides the capabilities of reading pressure/altitude (<a class="el" href="../../d9/d6b/struct_barometric_sensor.html" title="Virtual Barometric Pressure/Altimeter Sensor Interface.">BarometricSensor</a>).</li>
<li>A variation which supports callbacks (<a class="el" href="../../db/d26/struct_barometric_sensor__with_cb.html" title="Virtual Barometric Pressure/Altimeter Interface (with callback support)">BarometricSensor_withCb</a>).</li>
<li>A variation that supports callbacks and expects to be used in an asynchronous system (<a class="el" href="../../de/de1/struct_barometric_sensor__async_with_cb.html" title="Virtual Barometric Pressure/Altimeter Interface (asynchronous mode)">BarometricSensor_asyncWithCb</a>).</li>
</ul>
<p >Note that there are differences in fundamental assumptions and function behaviors across the variations. Even small changes in an interface can impact expected behaviors.</p>
<h2>Modifying the Interfaces</h2>
<p >There are a number of ways you might modify this interface to suit your needs:</p>
<ul>
<li>Change the type of the pressure parameter (e.g., to a float)</li>
<li>Change the fixed-point format of the parameter (e.g., to 24.8, giving a wider range reduced resolution. Or adopt a standard like Q16 across all values in your program so you can simplify math operations)</li>
<li>Return the pressure sample, and use a separate function to determine validity.</li>
<li>Specifying additional callback parameters</li>
<li>Varying the types of callbacks used</li>
<li>Separating callbacks for altitude and pressure updates</li>
<li>Eliminating the ability to unregister a callback</li>
<li>Supporting only a single callback function (this is primarily a change in documentation to note the change in assumption) </li>
</ul>

<p class="definition">Definition in file <a class="el" href="../../d0/d08/barometric__sensor_8h_source.html">barometric_sensor.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a048ffd57648368fd123cc0674a0db7c5" name="a048ffd57648368fd123cc0674a0db7c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a048ffd57648368fd123cc0674a0db7c5">&#9670;&nbsp;</a></span>BarometricErrorCb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* BarometricErrorCb) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function prototype for barometric sensor errors. </p>
<p >When an error in the virtual barometric device occurs, this callback function will be invoked. The virtual device itself does not support error handling capabilities, so we recommend using this callback in tightly-coupled system code to take the appropriate recovery action (restart the device, restart the system, etc.).</p>
<p >The callback is not guaranteed to run on its own thread of control. We recommend keeping the implementation small. Your function implementation could take the new sample and perform some dispatching operation (e.g., add the value to a queue), ensuring that any "heavy" processing happens on a new thread. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d08/barometric__sensor_8h_source.html#l00151">151</a> of file <a class="el" href="../../d0/d08/barometric__sensor_8h_source.html">barometric_sensor.h</a>.</p>

</div>
</div>
<a id="aa55487aacceb8034c0f58ce67a727228" name="aa55487aacceb8034c0f58ce67a727228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa55487aacceb8034c0f58ce67a727228">&#9670;&nbsp;</a></span>NewBarometricSampleCb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* NewBarometricSampleCb) (uint32_t pressure, int32_t altitude)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function prototype for processing new barometric samples. </p>
<p >When a new (and valid) barometric pressure/altitude sample is available, this callback function will be invoked.</p>
<p >The callback is not guaranteed to run on its own thread of control. We recommend keeping the implementation small. Your function implementation could take the new sample and perform some dispatching operation (e.g., add the value to a queue), ensuring that any "heavy" processing happens on a new thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pressure</td><td>The latest pressure sample.</td></tr>
  </table>
  </dd>
</dl>
<p>Pressure will be formatted as a 32-bit fixed-point integer with format UQ22.10, giving a resolution of 0.001 hPa.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">altitude</td><td>The latest altitude sample.</td></tr>
  </table>
  </dd>
</dl>
<p>Altitude will be formatted as a signed 32-bit fixed-point number in format Q21.10. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d08/barometric__sensor_8h_source.html#l00136">136</a> of file <a class="el" href="../../d0/d08/barometric__sensor_8h_source.html">barometric_sensor.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
