<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded Artistry C Interfaces: virtual_devices/temperature_sensor.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Embedded Artistry C Interfaces
   </div>
   <div id="projectbrief">A reference collection of abstract interfaces in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_4c48e607e7c68c02fa43edfc29f787db.html">virtual_devices</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle"><div class="title">temperature_sensor.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Example temperature sensor interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for temperature_sensor.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d4a/temperature__sensor_8h__incl.jpg" border="0" usemap="#avirtual__devices_2temperature__sensor_8h" alt=""/></div>
<map name="avirtual__devices_2temperature__sensor_8h" id="avirtual__devices_2temperature__sensor_8h">
<area shape="rect" title="Example temperature sensor interface." alt="" coords="5,5,188,47"/>
<area shape="rect" title=" " alt="" coords="13,95,87,121"/>
<area shape="rect" title=" " alt="" coords="112,95,177,121"/>
</map>
</div>
</div>
<p><a href="../../da/d31/temperature__sensor_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9f/struct_temperature_sensor.html">TemperatureSensor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual Temperature Sensor Interface.  <a href="../../d7/d9f/struct_temperature_sensor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d76/struct_temperature_sensor__with_cb.html">TemperatureSensor_withCb</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual Temperature Sensor Interface with Callback Support.  <a href="../../da/d76/struct_temperature_sensor__with_cb.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aec1fce23e0f52a258e2f3b44fb23b682"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d31/temperature__sensor_8h.html#aec1fce23e0f52a258e2f3b44fb23b682">NewTemperatureSampleCb</a>) (int16_t temperature)</td></tr>
<tr class="memdesc:aec1fce23e0f52a258e2f3b44fb23b682"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function prototype for processing new temperature samples.  <a href="../../da/d31/temperature__sensor_8h.html#aec1fce23e0f52a258e2f3b44fb23b682">More...</a><br /></td></tr>
<tr class="separator:aec1fce23e0f52a258e2f3b44fb23b682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a451add8b7e9da17241198d46d12bfc"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d31/temperature__sensor_8h.html#a7a451add8b7e9da17241198d46d12bfc">TemperatureErrorCb</a>) (void)</td></tr>
<tr class="memdesc:a7a451add8b7e9da17241198d46d12bfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function prototype for temperature sensor errors.  <a href="../../da/d31/temperature__sensor_8h.html#a7a451add8b7e9da17241198d46d12bfc">More...</a><br /></td></tr>
<tr class="separator:a7a451add8b7e9da17241198d46d12bfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Example temperature sensor interface. </p>
<p >This header defines the core interfaces for a virtual temperature sensor. Two samples are provided:</p>
<ol type="1">
<li>A basic interface for reading temperature (<a class="el" href="../../d7/d9f/struct_temperature_sensor.html" title="Virtual Temperature Sensor Interface.">TemperatureSensor</a>)</li>
<li>An interface expanded with support for callbacks (<a class="el" href="../../da/d76/struct_temperature_sensor__with_cb.html" title="Virtual Temperature Sensor Interface with Callback Support.">TemperatureSensor_withCb</a>)</li>
</ol>
<h2>Modifying the Interfaces</h2>
<p >There are a number of ways you might modify this interface to suit your needs:</p>
<ul>
<li>Change the type or format of the temperature value</li>
<li>Return the temperature sample, and use a separate function to determine validity</li>
<li>Supporting a purely asynchronous processing model (see <a class="el" href="../../d0/d08/barometric__sensor_8h.html" title="Example barometric pressure sensor interfaces that also support altitude calculations.">barometric_sensor.h</a> or asynchronous_interface.h for an example)</li>
</ul>
<h2>Possible Humidity Specifications</h2>
<p >For the data format, we can consider a few options:</p><ul>
<li>floating point</li>
<li>Provide a signed 16-bit fixed point integer in format Q7.8 (1 sign bit, 7 integral bits, and 8 fractional bits). This gives us a range of [-128°C, 128°C] (well beyond the ranges typically supported by temperature sensors, and beyond the needs of our intended application). We end up with a resolution of 0.0039°C.</li>
<li>Q8.7 would provide a greater range (±256°C) with still-more-than-sufficient precision (0.0078°C). However, this is still well beyond the temperature range of sensors we work with.</li>
<li>If higher resolution as important (or 32-bit values are preferred for processing reasons), providing a 32-bit fixed point integer with format Q21.10, gives a resolution of 0.001°C.</li>
<li>Use a standard of Q16 to simplify fixed point math across your entire system </li>
</ul>

<p class="definition">Definition in file <a class="el" href="../../da/d31/temperature__sensor_8h_source.html">temperature_sensor.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="aec1fce23e0f52a258e2f3b44fb23b682" name="aec1fce23e0f52a258e2f3b44fb23b682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec1fce23e0f52a258e2f3b44fb23b682">&#9670;&nbsp;</a></span>NewTemperatureSampleCb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* NewTemperatureSampleCb) (int16_t temperature)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function prototype for processing new temperature samples. </p>
<p >When a new (and valid) temperature sample is available, this callback function will be invoked.</p>
<p >The callback is not guaranteed to run on its own thread of control. We recommend keeping the implementation small. Your function implementation could take the new sample and perform some dispatching operation (e.g., add the value to a queue), ensuring that any "heavy" processing happens on a new thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">temperature</td><td>The latest temperature sample.</td></tr>
  </table>
  </dd>
</dl>
<p>Temperature readings will be provided as a signed 16-bit fixed point integer in format Q7.8. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d31/temperature__sensor_8h_source.html#l00098">98</a> of file <a class="el" href="../../da/d31/temperature__sensor_8h_source.html">temperature_sensor.h</a>.</p>

</div>
</div>
<a id="a7a451add8b7e9da17241198d46d12bfc" name="a7a451add8b7e9da17241198d46d12bfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a451add8b7e9da17241198d46d12bfc">&#9670;&nbsp;</a></span>TemperatureErrorCb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* TemperatureErrorCb) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function prototype for temperature sensor errors. </p>
<p >When an error in the virtual temperature device occurs, this callback function will be invoked. The virtual device itself does not support error handling capabilities, so we recommend using this callback in tightly-coupled system code to take the appropriate recovery action (restart the device, restart the system, etc.).</p>
<p >The callback is not guaranteed to run on its own thread of control. We recommend keeping the implementation small. Your function implementation could take the new sample and perform some dispatching operation (e.g., add the value to a queue), ensuring that any "heavy" processing happens on a new thread. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d31/temperature__sensor_8h_source.html#l00113">113</a> of file <a class="el" href="../../da/d31/temperature__sensor_8h_source.html">temperature_sensor.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
